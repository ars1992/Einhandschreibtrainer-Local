"use strict"

const jsonTexte = {
    Text1: "Aus einem Kinderbuch von Helme Heine Es war einmal ein Hase mit einer roten Nase und einem blauen Ohr. Das kommt ganz selten vor. Die Tiere wunderten sich sehr, wo kam dieser Hase her. Er hat im Gras gesessen und still den Klee gefressen. Und als der Fuchs vorbeigerannt, hat der den Hasen nicht erkannt. Da freute sich der Hase. ?Wie schoen ist meine Nase, und auch mein blaues Ohr, das kommt so selten vor?.",
    Text2: "Bert Brecht Geschichten vom Herrn Keuner Herrn K.s Lieblingstier Als Herr K. gefragt wurde, welches Tier er vor allen schaetze, nannte er den Elefanten und begruendete dies so: Der Elefant vereint List mit Staerke. Das ist nicht die kuemerliche List, die ausreicht, einer Nachstellung zu entgehen oder ein Essen zu ergattern, indem man nicht auffaellt, sondern die List, welcher die Staerke fuer grosse Unternehmungen zur Verfuegung steht. Wo dieses Tier war, fuehrt eine breite Spur. Dennoch ist es gutmuetig, es versteht Spass. Es ist ein guter Freund, wie es ein guter Feind ist. Sehr gross und schwer, ist es doch auch sehr schnell. Sein Ruessel fuehrt einem enormen Koerper auch die kleinsten Speisen zu, auch Nuesse. Seine Ohren sind verstellbar. Er hoert nur, was ihm passt. Er wird auch sehr alt. Er ist auch gesellig, und dies nicht nur zu Elefanten. Ueberall ist er sowohl beliebt als auch gefuerchtet. Eine gewisse Komik macht es moeglich, dass er sogar verehrt werden kann. Er hat eine dicke Haut, darin zerbrechen die Messer, aber sein Gemuet ist zart. Er kann traurig werden. Er kann zornig werden. Er tanzt gern. Er stirbt im Dickicht. Er ist grau und faellt nur durch seine Masse auf. Er ist nicht essbar. Er kann gut arbeiten. Er trinkt gern und wird froehlich. Er tut etwas fuer die Kunst. Er liefert Elfenbein.",
    Text3: "... es gibt doch noch gute Menschen ... Eines Nachmittags fuhr ein reicher Anwalt in seiner blinkenden Limousine durch die Gegend, als er am Wegrand zwei M„nner entdeckte, die Gras aáen. Verwirrt befahl er seinem Fahrer, den Wagen anzuhalten und stieg aus, um die Situation unter die Lupe zu nehmen. Er fragte den einen Mann: \"Warum essen Sie Gras?\" \"Wir haben kein Geld, um etwas zu essen zu kaufen\", antwortet der Mann, \"WIR MšSSEN GRAS ESSEN.\" Der Rechtsanwalt antwortete: \"Wenn das so ist, dann k”nnt ihr mit zu meinem Haus kommen und ich werde euch was zu essen geben.\" \"Aber mein Herr, ich habe eine Frau und zwei Kinder. Sie sind dort drüben unter dem Baum.\" \"Dann bring sie mit\", antwortete der Rechtsanwalt. Der zweite Mann sagte: \"Ich habe auch eine Frau und sechs Kinder.\" \"Dann bringt sie alle mit\", sagte der Rechtsanwalt. Sie quetschten sich alle in die riesige Limousine. Als sie unterwegs waren, wandte sich einer der armen Typen an den Rechtsanwalt und sagte: \"Mein Herr, Sie sind sehr freundlich. Vielen Dank, dass Sie uns alle mitnehmen.\" Ehrlich gerhrt sagte der Rechtsanwalt: \"Es ist mir eine Freude. Ihnen wird es bei mir gefallen, mein G„rtner ist krank und das Gras steht fast dreiáig Zentimeter hoch.",
    Text4: "Ein Mann will die Katze seiner Frau heimlich loswerden und beschlieát, sie auszusetzen. Er nimmt sie mit ins Auto, f„hrt 20 H„user weit, setzt die Katze aus und f„hrt heim. Zehn Minuten sp„ter ist die Katze auch wieder da. \"Na gut\", denkt sich der Mann, \"war vielleicht ein wenig zu kurz die Strecke\". Setzt sich wieder mit der Katze ins Auto, f„hrt 5 Kilometer weit und setzt sie aus. Zwanzig Minuten sp„ter ist die Katze wieder zu Hause. ?Jetzt reicht es!\" denkt sich der Mann, nimmt die Katze mit ins Auto und f„hrt 20 Kilometer, dann durch den Wald. šber eine Brücke, rechts, links und setzt die Katze dann schlieálich mitten im Wald auf einer Lichtung aus. Eine halbe Stunde sp„ter ruft der Mann zu Hause an. \"Ist die Katze da?\" fragt er seine Frau. \"Ja, warum?\" ?Hol sie mal ans Telefon, ich habe mich verfahren...!\"",
    Text5: "Das Fr„ulein stand am Meere und seufzte lang und bang, es rührte sie so sehre der Sonnenuntergang. Mein Fr„ulein! Sei'n Sie munter, das ist ein altes Stück; Hier vorne geht sie unter und kehrt von hinten zurck. Heinrich Heine",
    Text6: "Gedicht von Joachim Ringelnatz Fuáball (nebst Abart und Ausartung) Der Fuáballwahn ist eine Krankheit, aber selten, Gott sei Dank! Ich kenne wen, der litt akut an Fuáballwahn und Fuáballwut. Sowie er einen Gegenstand in Kugelform und „hnlich fand so trat er zu und stieá mit Kraft ihn in die bunte Nachbarschaft. Ob es ein Schwalbennest, ein Tiegel, ein K„se, Globus oder Igel, ein Krug, ein Schmuckwerk am Altar, ein Kegelball, ein Kissen war, und wem der Gegenstand geh”rte, das war etwas, was ihn nicht st”rte. Bald trieb er eine Schweineblase bald steife Hte durch die Straáe.Dann wieder mit gebtem Schwung stieá er den Fuá in Pferdedung. Mit Schwamm und Seife trieb er Sport. Die Lampenkuppel brach sofort. Das Nachtgeschirr flog zielbewusst der Tante Berta an die Brust. Kein Abwehrmittel wollte ntzen nicht Stacheldraht in Stiefelspitzen, noch Puffer, auáen angebracht. Er siegte immer, 0 zu 8und bte weiter frisch, fromm, frei mit Totenkopf und Strauáenei. Erschreckt durch seine wilden St”áe gab man ihm nie Kartoffelkl”áe. Selbst vor dem Podex und den Brsten der Frau ergriff ihn ein Gelsten was er jedoch als Mann von Stand aus H”flichkeit meist berwand. Dagegen gab ein Schwartenmagen dem Fleischer Anlass zum Verklagen. Was beim Gemsemarkt geschah kommt einer Schlacht bei Leipzig nah. Da schwirrten Žpfel, Apfelsinen durch Publikum wie wilde Bienen. Da sah man Blutorangen, Zwetschgen an blassen Wangen sich zerquetschen. Das Eigelb berzog die Leiber ein Fischkorb platzte zwischen Weiber. Kartoffeln spritzten und Zitronen. Man duckte sich vor den Melonen. Dem Krautkopf folgten Krbisschsse. Dann donnerten die Kokosnsse. Genug! Als alles dies getangriff unser Held zum Gr”áenwahn. Schon sch„kernd mit der U-Boots-Mine besann er sich auf die Lawine. Doch als pomp”ser Fuáballst”áer fand er die Erde noch viel gr”áer. Er rang mit mancherlei Problemen. Zun„chst: Wie soll man Anlauf nehmen? Dann schiffte er von dem Balkon sich ein in einen Luftballon. Und blieb von da an in der Luft verschollen. Hat sich selbst verpufft. Ich warne euch, ihr Brüder Jahns vor dem Gebrauch des Fuáballwahns!",
    Text7: "Heidelberg: Stadt und Schloss in der Geschichte Spuren menschlichen Lebens um Heidelberger gibt es seit Urzeiten: vor 500.000 Jahren lebte der Homo heidelbergensis in der Gegend, aus der Jüngeren Steinzeit sind Topfscherben und Jagdwaffen erhalten, ungefähr 800 v. Chr. siedelten die Kelten auf dem Heiligenberg, später hinterließen die Römer mit einem Kastell archäologische Spuren (und das Wissen um den Weinanbau), bis sie 260 n. Chr. von den Alemannen vertrieben wurden. Mit einer dauerhaften Besiedlung ging es jedoch erst im 6. Jahrhundert los, schnell entwickeln sich die Dörfer Neuenheim und Bergheim, später auch Handschuhsheim (765 erstmals erwähnt), Rohrbach (766) sowie Wieblingen und Kirchheim (Erwähnung 767). Den Titel des Pfalzgrafen bei Rhein erhält zuerst Konrad von Hohenstaufen, Halbbruder des Kaisers Friedrich I. Barbarossa, IM jahre 1155. Der Name “Heidelberch“ wird erstmals 1196 erwähnt, und zwar in einer Urkunde des Klosters Schönau. Bald darauf, im Jahre 1225, beginnt die Geschichte des Schlosses, als der Wittelsbacher Ludwig I., Pfalzgraf von 1214-1231, vom Kloster Lorsch mit einer Burg belehnt wurde, die das Neckartal mit seiner Handelsstraße bewachen sollte. 1356 wird die Kurfürstenwürde in der damaligen deutschen Verfassung verankert: die Pfalzgrafen stellen von nun an einen der sieben Kurfürsten des Reiches. 1386 gründet Ruprecht I. die Universität, schon 1392 erstreckt sich Heidelberg bis zum heutigen Bismarckplatz, und 1400 wird mit dem Bau der Heiliggeistkirche begonnen. Im gleichen Jahr wird Kurfürst Ruprecht III. zum deutschen König Ruprecht I. gewählt, nach seinem Tod 1410 wird die Pfalz unter seinen vier Söhnen aufgeteilt. Nachfolger Ruprechts in Heidelberg wird sein Sohn Ludwig III., und dessen Bekanntschaft mit dem mittelalterlichen Dichter Oswald von Wolkenstein verdankt Heidelberg das frühe Loblied „Ich ruem dich, haidlberg“. In den folgenden Jahren blühen Heidelberg und sein Schloss auf. Ludwig V. (1508-1544) verstärkt die Befestigungsanlage der Burg, unter anderem werden auch der Stückgarten und der Krautturm ausgebaut. Zu dieser Zeit werden auch der Bibliotheksbau und der Frauenzimmerbau erbaut und die Wirtschaftsgebäude erweitert. 1542 fügt Ludwig V. auf der Ostseite noch den Ludwigsbau ein und Friedrich II. lässt 1549 den Gläsernen-Saal-Bau errichten. Mit Kurfürst Ottheinrich (1556-1559) und seinem Ottheinrichsbau beginnt die Verwandlung der Burg in ein prächtiges Renaissance-Schloss. Unter Friedrich IV. (1592-1610) erhält das Schloss einen weiteren Palast, den Friedrichsbau. Friedrich IV. war auch derjenige, der 1606/07 die Festung Friedrichsburg und die Stadt Mannheim gegründet hat. Die Stadt Heidelberg mit ihrer Bevölkerung aus Bayern, Fischern, Handwerkern und Händlern wächst ebenso, aber durch den Erbfolgekrieg sind nur wenige bauliche Zeugnisse erhalten geblieben, ein besonders schönes Beispiel der damaligen Baukunst zeigt jedoch heute noch das Haus Zum Ritter St. Georg am Marktplatz, das 1592 von einem hugenottischen Tuchhändler erbaut wurde. Heidelberg und seine Kurfürsten werden wiederholt in politische und theologische Auseinandersetzungen um Päpste und die Frage nach dem wahren Glauben verwickelt. Im kaiserlichen Auftrag muss Kurfürst Ludwig III. 1415 in Konstanz den böhmischen Ketzer Johannes Hus verbrennen  lassen, 1518 darf jedoch Luther im Heidelberger Augustinerkloster unbeheiligt seine Thesen verteidigen. Schon 1556 folgt die Pfalz unter ihren Kurfürsten der Reformation, unter ihrem Einfluss entwickelt  sich die Universität zu einem Zentrum der Reformationsbewegung und der 1563 publizierte calvinistische „Heidelberger Katechimus“ wird zum bedeutendsten Handbuch dieser Glaubenrichtung in Europa. 1608 übernimmt Kurfürst Friedrich IV. die Führung der Protestantischen Union - der Konflikt zwischen katholischen und protestantischen Fürstentümern verstärkt sich erheblich. Trotz der politischen Gewitterwolken wird das Heidelberger Schloss unter Friedrich V. (1613-1623), der Winterkönig, noch schöner und noch prächtiger gestaltet. Er entfaltet eine rege Bautätigkeit, dabei beschränkt er sich nicht nur auf Bauwerke wie den Englischen Palast, sondern lässt auch den Schlossgarten in das Achte Weltwunder verwandeln, bevor er 1620 als böhmischer König in der Schlacht am Weißen Berg unterliegt und so durch seine politische Hoffahrt Titel und Land verliert und der 30-jährige Krieg (1618-1648) ausbricht. 1622 eroberte der kaiserliche Feldherr Tilly Stadt und Schloss Heidelberg und lässt die berühmte Bibliotheca Palatina nach Rom in den Vatikan bringen, die Universität wird in den Kriegswirren geschlossen, und die Pfalz gerät unter die katholische Herrschaft von Bayern. Im Verlauf des Krieges werden Heidelberg und sein Umland mehrmals ausgeplündert und schwer zerstört. Das Land verliert drei Viertel seiner Bevölkerung, entweder durch den Krieg selbst oder durch den Krieg selbst oder durch nachfolgende Seuche wie Typhus, Pocken oder Pest. Mit dem Westfälischen Frieden 1649 wird Karl Ludwig, der Sohn Friedrich V., Kurfürst der Pfalz und führt den Protestantismus wieder ein, was in den nächsten Jahren viele Hugenotten, Flamen und Wallonen nach Heidelberg bringt. 1652 wird die Universität wiedereröffnet. 1671 verheiratet Karl Ludwig seine Tochter Elisabeth Charlotte (1652-1721), genannt Liselotte von der Pfalz mit Philip von Orléans, dem Bruder des französischen Sonnenkönigs Ludwig XIV. Als 1685 die Pfalz-Simmern Linie der Wittelsbacher ausstirbt, deklamiert der Sonnenkönig 1688 die Pfalz als zu Frankreich zugehörig und beginnt den Pfälzisch-Französischen Erbfolgekrieg, bei dem 1689 die Stadt und das Umland eingenommen und zerstört wird. Allein das Dorf Handschuhsheim wird dreimal niedergebrannt, die Toten werden in Massengräbern bestattet. Der Wiederaufbau beginnt recht zügig, jedoch werden 1693 Stadt und Schloss unter dem französischen General Mélac erneut erobert und dieses Mal systematisch verwüstet: das Schloss wird gesprengt, die Stadt wird mit Feuer in Schutt und Asche gelegt. Erst 1697 beginnen die Heidelberger mit dem Neuaufbau. Auf dem Grundriss der alten Straßenzüge zeigen sich nun entlang der Hauptstraße barocke Bauformen: ab 1701 der Neubau des Rathauses, 1712-1715 der Bau des Palais Morass, in den heute das Kurpfälzische Museum ist, 1712-1735 die Alte Universität. Das Schloss wird nur notdürftig repariert, da der neue Kurfürst weit entfernt wohnt. Das nunmehr katholische Herrscherhaus versucht, die protestantische Pfalz mit der Aufstellung von Marienfiguren (unter anderem die Madonna vom Kornmarkt) und dem Bau der Jesuitenkirche zum Katholizismus zu bekehren. Es kommt zu Spannungen zwischen der Bevölkerung und ihrem Kurfürsten, woraufhin Kurfürst 1720 das Mannheimer Schloss zur Restaurierung des Schlosses fallen lässt und 1720 das Mannheimer Schloss zur kurfürstlichen Residenz (neben der Sommerresidenz in Schwetzingen) erhebt. Sein Nachfolger Kurfürst Karl Theodor (1742-1799) entfaltet dennoch in Heidelberg eine rege Bautätigkeit, Heidelberg verdankt ihm das Große Fass (1750), das Karlstor (1775-1781) und nicht zuletzt die Alte Brücke (1786-1788). Als 1764 das halb aufgebaute Schloss durch einen Blitzschlag erneut niederbrennt, wird hier jegliche Bautätigkeit aufgegeben und das Schloss bleibt für mehrere Jahre fast unbeachtet (nein, nicht völlig, der Dichterfürst Goethe hat es bei mehreren Besuchen besichtigt und gerühmt). Erst im frühen 19. Jahrhundert setzt sich Graf Grinberg für die Erhaltung der Schlossruine ein, gleichzeitig wird mit der aufkommenden Romantik die Stadt Heidelberg und ihr Schloss besugen, verehrt und eben auch erste ausländische Gäste wie Edward Bulwer, William Turner oder Mark Twain bemalt und beschreiben die Komposition aus Flusslandschaft, Stadt und Schlossruine in eindringlichen Bildern. Auch heute noch macht dieses Bild den großen Reiz aus, aber Heidelberg hat sich auch unabhängig vom Schloss kräftig weiterentwickelt. 1803 wird die Rupertus-Karolus-Universität vom badischen Großherzog Karl Friedrich reformiert (und trägt seitdem den Namen beider Gründer), die naturwissendschaftlichen Institute sind heute in Neuenheim zu finden. Mit der Eingemeindung der umliegenden Dörfer ist Heidelberg geographisch beträchtlich gewachsen, und auch wirtschaftlich hat sich Heidelberg stabil entwickelt. Heidelberg heute ist eine Stadt mit altehrwürdiger Vergangenheit, die Sie aber dennoch als sehr jung und lebendig kennenlernen.",
    Text8: "1890 1280 9103 8901 1781 2078 1037 0811 7910 0279 1307 9120 8911 7801 2791 9801 1908 2019 8318 0701 1872 1087 3197 1197 2019 7319 8218 7119 7219 1981 2980 1308 1187 1287 1387 1197 1290 7139 7102 9811 0871 2971 9180 1928 1938 1817 1820 7018 3701 9171 9271 0090 3719 2818 1719 2719 8191 8290 1839 1718 1700 2817 3081 7191 7291 7003 9182 9171 8172 9181 8911 0982 1983 0171 7821 7831 7091 1079 0210 7931 8920 0187 1179 2109 1803 1402 6170 0591 1671 4911 7341 3049 1670 1480 6115 3107 2911 3811 6204 1957 1761 1109 4143 7194 3103 0760 1619 1684 1351 1927 1381 1381 4621 7905 1176 1419 1074 3139 4163 0719 6114 0813 5010 7921 1381 0816 4219 7050 1716 1149 1470 3193 4136 7169 1164 8103 1519 7210 5318 8013 1246 1579 1617 0194 1137 0414 3917 6311 9618 4615 1312 7918 8311 0640 1597 1067 1019 0141 3047 1040 9317 3601 1691 0640 1053 1129 7183"
  } 

// verwaltet generirte Daten während der Übung
const fehlerVerarbeitung = {

    _list: [
        ["a", 0, 0], ["b", 0, 0], ["c", 0, 0],
        ["d", 0, 0], ["e", 0, 0], ["f", 0, 0],
        ["g", 0, 0], ["h", 0, 0], ["i", 0, 0],
        ["j", 0, 0], ["k", 0, 0], ["l", 0, 0],
        ["m", 0, 0], ["n", 0, 0], ["o", 0, 0],
        ["p", 0, 0], ["q", 0, 0], ["r", 0, 0],
        ["s", 0, 0], ["t", 0, 0], ["u", 0, 0],
        ["v", 0, 0], ["w", 0, 0], ["x", 0, 0],
        ["z", 0, 0], ["y", 0, 0], ["A", 0, 0],
        ["B", 0, 0], ["C", 0, 0], ["D", 0, 0],
        ["E", 0, 0], ["F", 0, 0], ["G", 0, 0],
        ["H", 0, 0], ["I", 0, 0], ["J", 0, 0],
        ["K", 0, 0], ["L", 0, 0], ["M", 0, 0],
        ["N", 0, 0], ["O", 0, 0], ["P", 0, 0],
        ["Q", 0, 0], ["R", 0, 0], ["S", 0, 0],
        ["T", 0, 0], ["U", 0, 0], ["V", 0, 0],
        ["W", 0, 0], ["X", 0, 0], ["Z", 0, 0],
        ["Y", 0, 0], ["ä", 0, 0], ["ü", 0, 0],
        ["ö", 0, 0], ["ß", 0, 0], ["Ä", 0, 0],
        ["Ö", 0, 0], ["Ü", 0, 0], [" ", 0, 0],
        ["0", 0, 0], ["1", 0, 0], ["2", 0, 0],
        ["3", 0, 0], ["4", 0, 0], ["5", 0, 0],
        ["6", 0, 0], ["7", 0, 0], ["8", 0, 0],
        ["9", 0, 0],
        ["'", 0, 0], ["-", 0, 0], ["]", 0, 0],
        ["^", 0, 0], ["[", 0, 0], ["?", 0, 0],
        ["=", 0, 0], ["#", 0, 0], ["!", 0, 0],
        ["§", 0, 0], ["@", 0, 0], ["_", 0, 0],
        [">", 0, 0], [")", 0, 0], ["|", 0, 0],
        ["+", 0, 0], ["/", 0, 0], ["$", 0, 0],
        ["*", 0, 0], ["%", 0, 0], ["&", 0, 0],
        [")", 0, 0], ["<", 0, 0], ["\\", 0, 0],
        ["`", 0, 0], ["\"", 0, 0], ["€", 0, 0],
        [".", 0, 0], [",", 0, 0], [":", 0, 0],
        [";", 0, 0], ["}", 0, 0], ["{", 0, 0],
    ],

    istRichtigeReihenfolge: function (list) {
        if (!list) {
            return false
        }
        for (let i = 1; i < list.length; i++) {
            if (list[i - 1][1] < list[i][1]) {
                return false
            }
        }
        return true
    },

    getfehlerAuswertung: function (list) {
        if (!list) {
            return false
        }
        while (!this.istRichtigeReihenfolge(list)) {
            for (let i = 1; i < list.length; i++) {
                if (list[i - 1][1] < list[i][1]) {
                    const temp = list[i - 1]
                    list[i - 1] = list[i]
                    list[i] = temp
                }
            }
        }
        return list
    },

    setFehlerZähler: function (eingabe, anzeige) {
        if (eingabe !== anzeige) {
            for (let i = 0; i < this._list.length; i++) {
                if (this._list[i][0] === anzeige) {
                    this._list[i][1]++
                }
            }
        }
    },

    setZeichenZähler: function (anzeige) {
        for (let i = 0; i < this._list.length; i++) {
            if (anzeige === this._list[i][0]) {
                this._list[i][2]++
            }
        }
    },

    getFehlerGesamt: function () {
        let fehlerGesamt = 0
        for (const element of this._list) {
            fehlerGesamt += element[1]
        }
        return fehlerGesamt
    },

    getFehlerInProzent: function () {
        if (this.zeichenGesamt() <= 0) {
            return 0
        }
        return parseInt(this.getFehlerGesamt() / this.zeichenGesamt() * 100)
    },

    zeichenGesamt: function () {
        let zeichenGesamt = 0
        for (const element of this._list) {
            zeichenGesamt += element[2]
        }
        return zeichenGesamt
    },

    // für spätere funktion zum zurücksetzen der gesamtauswertung
    setFehlerZurückSetzen: function (list) {
        for (let i = 0; i < list.length; i++) {
            this._list[i][1] = 0
            this._list[i][2] = 0
        }
    },
}

// zeig alle daten des übungsdurchlaufes in der Auswertung an
const Auswertung = {

    auswertungDatum: document.querySelector(".auswertung_datum"),
    auswertungAnzeigen: document.querySelector(".auswertung"),
    resetButton: document.querySelector(".auswertung_resetButton"),
    ausgabeFehlerGesamt: document.querySelector(".span_fehlergesamt"),
    ausgabeFehlerProzent: document.querySelector(".span_fehlerProzent"),
    ausgabeAnschläge: document.querySelector(".span_anschlaege"),
    ausgabePlatz_1_Buchsabe: document.querySelector(".platz1_buchstabe"),
    ausgabePlatz_2_Buchsabe: document.querySelector(".platz2_buchstabe"),
    ausgabePlatz_3_Buchsabe: document.querySelector(".platz3_buchstabe"),
    ausgabePlatz_4_Buchsabe: document.querySelector(".platz4_buchstabe"),
    ausgabePlatz_5_Buchsabe: document.querySelector(".platz5_buchstabe"),

    ausgabePlatz_1_Fehler: document.querySelector(".platz1_fehler"),
    ausgabePlatz_2_Fehler: document.querySelector(".platz2_fehler"),
    ausgabePlatz_3_Fehler: document.querySelector(".platz3_fehler"),
    ausgabePlatz_4_Fehler: document.querySelector(".platz4_fehler"),
    ausgabePlatz_5_Fehler: document.querySelector(".platz5_fehler"),

    ausgabePlatz_1_Von: document.querySelector(".platz1_von"),
    ausgabePlatz_2_Von: document.querySelector(".platz2_von"),
    ausgabePlatz_3_Von: document.querySelector(".platz3_von"),
    ausgabePlatz_4_Von: document.querySelector(".platz4_von"),
    ausgabePlatz_5_Von: document.querySelector(".platz5_von"),

    inAuswertung: false,


    autoAuswertung: () => {
        Auswertung.erstellenGesamtAuswertung()

        Auswertung.inAuswertung = true
        let listeTopFünfFehler = fehlerVerarbeitung.getfehlerAuswertung(fehlerVerarbeitung._list).slice(0, 5)
        setTimeout(clearInterval(Menue._time))
        StartAnzeige.ausblenden()
        Auswertung.auswertungAnzeigen.classList.remove("auswertung_none")
        Auswertung.auswertungAnzeigen.classList.add("auswertung_notNone")

        let aktuellesDatum = Date.now()
        const datumAnzeige = { day: "numeric", month: "numeric", year: "2-digit", hour: "numeric", minute: "numeric" }
        Auswertung.auswertungDatum.innerText = Intl.DateTimeFormat("de-DE", datumAnzeige).format(aktuellesDatum)
        Auswertung.ausgabeAnschläge.innerText = parseInt(Menue.getAnschlagProMin())
        Auswertung.ausgabeFehlerGesamt.innerText = fehlerVerarbeitung.getFehlerGesamt()
        Auswertung.ausgabeFehlerProzent.innerText = fehlerVerarbeitung.getFehlerInProzent()

        Auswertung.ausgabePlatz_1_Buchsabe.innerText = listeTopFünfFehler[0][0]
        Auswertung.ausgabePlatz_2_Buchsabe.innerText = listeTopFünfFehler[1][0]
        Auswertung.ausgabePlatz_3_Buchsabe.innerText = listeTopFünfFehler[2][0]
        Auswertung.ausgabePlatz_4_Buchsabe.innerText = listeTopFünfFehler[3][0]
        Auswertung.ausgabePlatz_5_Buchsabe.innerText = listeTopFünfFehler[4][0]

        Auswertung.ausgabePlatz_1_Fehler.innerText = listeTopFünfFehler[0][1]
        Auswertung.ausgabePlatz_2_Fehler.innerText = listeTopFünfFehler[1][1]
        Auswertung.ausgabePlatz_3_Fehler.innerText = listeTopFünfFehler[2][1]
        Auswertung.ausgabePlatz_4_Fehler.innerText = listeTopFünfFehler[3][1]
        Auswertung.ausgabePlatz_5_Fehler.innerText = listeTopFünfFehler[4][1]

        Auswertung.ausgabePlatz_1_Von.innerText = listeTopFünfFehler[0][2]
        Auswertung.ausgabePlatz_2_Von.innerText = listeTopFünfFehler[1][2]
        Auswertung.ausgabePlatz_3_Von.innerText = listeTopFünfFehler[2][2]
        Auswertung.ausgabePlatz_4_Von.innerText = listeTopFünfFehler[3][2]
        Auswertung.ausgabePlatz_5_Von.innerText = listeTopFünfFehler[4][2]
    },


    auswertungReset: () => {
        Auswertung.resetButton.addEventListener("click", Auswertung.allesZurückSetzen)
    },

    allesZurückSetzen: () => {
        // Auswertung.auswertungAnzeigen.classList.remove("auswertung_notNone")
        // Auswertung.auswertungAnzeigen.classList.add("auswertung_none")

        // StartAnzeige._startAusgabe.startDiv.classList.remove("auswertung_none")
        // StartAnzeige.flackernAnzeige()
        // Tastatur.setTextCounter(0)
        // Menue.setAnzeigeZeitAnschlagAufNull()

        // Tastatur.clearTastatur()
        // TextLauf.laufenderText(Tastatur.textCounter)

        // fehlerVerarbeitung.setFehlerZurückSetzen(fehlerVerarbeitung._list)

        // ProgrammStart.gestartet = false
        // Auswertung.inAuswertung = false
        location.reload()
    },

    // generirt html code aus tamplate und zeigt daten der auswertungsdaten aus newUser.json an
    erstellenGesamtAuswertung: () => {
        let ausgabeTemplate = document.querySelector(".auswertung_template")
        let td = ausgabeTemplate.content.querySelectorAll("p")
        

        fehlerVerarbeitung._list.forEach(function (dataRow) {
            td[0].textContent = dataRow[0]
            td[1].textContent = dataRow[1]
            td[2].textContent = dataRow[2]

            let tb = document.querySelector(".auswertung_divBody")
            let clone = document.importNode(ausgabeTemplate.content, true)
            tb.appendChild(clone)
        })
    },
}

// steuert die anzeige das man mit der Leertaste starten kann
const StartAnzeige = {
    _startAusgabe: {
        startDiv: document.querySelector(".start"),
        startPara: document.querySelector(".start_paragraph")
    },
    startInterval: null,

    flackernAnzeige: function () {
        this.startInterval = setInterval(() => {
            this._startAusgabe.startPara.classList.toggle("start_flackern")
            Tastatur.taste1.classList.toggle("shift")
        }, 1000)
    },

    ausblenden: function () {
        Tastatur.taste1.classList.remove("shift")
        setTimeout(clearInterval(this.startInterval))
        this._startAusgabe.startDiv.classList.add("auswertung_none")
    },
}

// stellt die texte aus texte.json bereit
const JsonTextlader = {

    jsonDateiName: null,
    data: null,

    gewähltenTextAusJsonFileFinden: (jsonFile, auswahl) => {
        JsonTextlader.jsonDateiName = jsonFile
        // JsonTextlader._getJsonDatei()
        const texte = jsonTexte
        for (const text in texte) {
            if (text === auswahl) {
                return texte[text]
            }
        }
    }
}


const Menue = {

    menueTextAuswahl: document.querySelector(".menue_textAuswahl"),
    menueZeitAuswahl: document.querySelector(".menue_zeitAuswahl"),
    menueStoppButton: document.querySelector(".menue_startButton"),
    menueAnschlagAusgabe: document.querySelector(".menue_anschlaegeMin"),
    menueZeitAusgabe: document.querySelector(".menue_timer"),

    _userTime: 120,
    _time: null,
    _aktTime: 0,
    _anschlaegeProMin: 0,

    ausgewählterText: "V0.1 Einhandschreibtrainer",

    _timerStop: function () {
        setInterval(() => {
            if (this._aktTime >= this._userTime) {
                setTimeout(() => { clearInterval(this._time), 50 })
                Auswertung.autoAuswertung()
                this._aktTime = 0
            }
        })
    },

    _timerStart: function () {
        let startTime = Date.now()
        this._time = setInterval(() => {
            this._aktTime = parseInt((Date.now() - startTime) / 1_000)
            this.menueZeitAusgabe.innerText = this._aktTime
        }, 100)
    },

    timerStopButton: function () {
        this.menueStoppButton.addEventListener("click", () => {
            Auswertung.autoAuswertung()
        })
    },

    ersteWahlTime: true,
    set_UserTime: function () {
        this.menueZeitAuswahl.addEventListener("click", () => {
            if (!this.ersteWahlTime) {
                this._userTime = parseInt(this.menueZeitAuswahl.value)
            } else {
                this.ersteWahlTime = false
            }
        })
    },

    setText: function () {
        let ersteWahlText = true
        this.menueTextAuswahl.addEventListener("click", () => {
            if (ersteWahlText) {
                this.ausgewählterText = JsonTextlader.gewähltenTextAusJsonFileFinden("json/texte.json", this.menueTextAuswahl.value)
            }
            TextLauf.laufenderText(Tastatur.textCounter)
        })
    },

    anschlagMessung: function () {
        setInterval(() => {
            if (Tastatur.textCounter / Menue._aktTime === Infinity) {
                Menue.menueAnschlagAusgabe.innerText = 0
            } else if (Menue._aktTime < this._userTime && Menue._aktTime !== 0) {
                Menue._anschlaegeProMin = (Tastatur.textCounter - 1) / Menue._aktTime * 60
                Menue.menueAnschlagAusgabe.innerText = parseInt(Menue._anschlaegeProMin)
            }
        }, 100)
    },

    getAusgewählterText: function () {
        return this.ausgewählterText
    },

    getAnschlagProMin: function () {
        return this._anschlaegeProMin
    },

    setAnzeigeZeitAnschlagAufNull: function () {
        this.menueAnschlagAusgabe.innerText = 0
        this.menueZeitAusgabe.innerText = 0
        this._aktTime = 0
        this._anschlaegeProMin = 0
    }
}

// generirt die anzeige des zu tippenden textes
const TextLauf = {

    textLaufF: document.querySelector(".text_lauf-f"),
    textLaufM: document.querySelector(".text_lauf-m"),
    textLaufA: document.querySelector(".text_lauf-a"),

    textLängeFrontFeld: 13,
    laufenderText: function (counter) {

        if (counter < this.textLängeFrontFeld) {
            this.textLaufF.placeholder = Menue.getAusgewählterText().slice(0, counter)
        } else {
            this.textLaufF.placeholder = Menue.getAusgewählterText().slice(counter - this.textLängeFrontFeld, counter)
        }

        this.textLaufM.innerHTML = "<u>" + Menue.getAusgewählterText()[counter] + "</u>"
        this.textLaufA.placeholder = Menue.getAusgewählterText().slice(counter + 1, counter + 20)
    }
}

// enthält alle Tastenkompinationen zur anzeige auf der Vtastatur 
// methoden zum mitzählen der erfolgten nutzereingaben während der übung
// methode übung beenden wenn text zu ende
const Tastatur = {

    taste1: document.querySelector(".tasta_taste-1"),
    taste2: document.querySelector(".tasta_taste-2"),
    taste3: document.querySelector(".tasta_taste-3"),
    taste4: document.querySelector(".tasta_taste-4"),
    taste5: document.querySelector(".tasta_taste-5"),
    tasteGelb: document.querySelector(".tasta_taste-gelb"),
    tasteRot: document.querySelector(".tasta_taste-rot"),
    textCounter: 0,

    einzelneTastenBuchstaben: {

        schiftInterval: null,

        tasteLeer: () => {
            Tastatur.taste1.classList.add("green")
        },

        tasteK_a: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_b: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_c: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_d: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_e: () => {
            Tastatur.taste3.classList.add("green")
        },

        tasteK_f: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
        },

        tasteK_g: () => {
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_h: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_i: () => {
            Tastatur.taste4.classList.add("green")
        },

        tasteK_j: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_k: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_l: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
        },

        tasteK_m: () => {
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_n: () => {
            Tastatur.taste5.classList.add("green")
        },

        tasteK_o: () => {
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_p: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_q: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_r: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste3.classList.add("green")
        },

        tasteK_s: () => {
            Tastatur.taste2.classList.add("green")
        },

        tasteK_t: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_u: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_v: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_w: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_x: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_y: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_z: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
        },

        // Umlaute

        tasteK_ä: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_ö: () => {
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        tasteK_ü: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        tasteK_ß: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },

        shiftAnzeige: () => {
            Tastatur.tasteRot.classList.add("shift")
            Tastatur.tasteGelb.classList.add("shift")
            Tastatur.einzelneTastenBuchstaben.schiftInterval = setInterval(() => {

                Tastatur.tasteRot.classList.toggle("shift")
                Tastatur.tasteGelb.classList.toggle("shift")
            }, 500)
        }
    },

    einzelneTastenZahlen: {
        zahlInterval: null,

        taste_0: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        taste_1: () => {
            Tastatur.taste2.classList.add("green")
        },

        taste_2: () => {
            Tastatur.taste3.classList.add("green")
        },

        taste_3: () => {
            Tastatur.taste4.classList.add("green")
        },

        taste_4: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
        },

        taste_5: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste3.classList.add("green")
        },

        taste_6: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        taste_7: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
        },

        taste_8: () => {
            Tastatur.taste3.classList.add("green")
            Tastatur.taste4.classList.add("green")
        },

        taste_9: () => {
            Tastatur.taste4.classList.add("green")
            Tastatur.taste5.classList.add("green")
        },
    },

    einzelneTastenSonderzeichen: {

        intervalSonderzeichen: null,

        taste_punkt: () => {
            Tastatur.taste3.classList.add("green")
            Tastatur.tasteRot.classList.add("green")
        },

        taste_komma: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.tasteGelb.classList.add("green")
        },

        taste_semikolon: () => {
            Tastatur.taste1.classList.add("green")
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.tasteGelb.classList.add("green")
            Tastatur.tasteRot.classList.add("green")
        },

        taste_doppelpunkt: () => {
            Tastatur.taste2.classList.add("green")
            Tastatur.taste3.classList.add("green")
            Tastatur.tasteGelb.classList.add("green")
            Tastatur.tasteRot.classList.add("green")
        },

        sonderzeichenAnzeige: (farbe) => {
            Tastatur[`taste${farbe}`].classList.add("shift")
            Tastatur.einzelneTastenSonderzeichen.intervalSonderzeichen = setInterval(() => {
                Tastatur[`taste${farbe}`].classList.toggle("shift")
            }, 500)
        }
    },

    tastaturAnzeige: (aktuelleTaste) => {
        const kleinBuchstaben = [
            [" ", Tastatur.einzelneTastenBuchstaben.tasteLeer],
            ["a", Tastatur.einzelneTastenBuchstaben.tasteK_a],
            ["b", Tastatur.einzelneTastenBuchstaben.tasteK_b],
            ["c", Tastatur.einzelneTastenBuchstaben.tasteK_c],
            ["d", Tastatur.einzelneTastenBuchstaben.tasteK_d],
            ["e", Tastatur.einzelneTastenBuchstaben.tasteK_e],
            ["f", Tastatur.einzelneTastenBuchstaben.tasteK_f],
            ["g", Tastatur.einzelneTastenBuchstaben.tasteK_g],
            ["h", Tastatur.einzelneTastenBuchstaben.tasteK_h],
            ["i", Tastatur.einzelneTastenBuchstaben.tasteK_i],
            ["j", Tastatur.einzelneTastenBuchstaben.tasteK_j],
            ["k", Tastatur.einzelneTastenBuchstaben.tasteK_k],
            ["l", Tastatur.einzelneTastenBuchstaben.tasteK_l],
            ["m", Tastatur.einzelneTastenBuchstaben.tasteK_m],
            ["n", Tastatur.einzelneTastenBuchstaben.tasteK_n],
            ["o", Tastatur.einzelneTastenBuchstaben.tasteK_o],
            ["p", Tastatur.einzelneTastenBuchstaben.tasteK_p],
            ["q", Tastatur.einzelneTastenBuchstaben.tasteK_q],
            ["r", Tastatur.einzelneTastenBuchstaben.tasteK_r],
            ["s", Tastatur.einzelneTastenBuchstaben.tasteK_s],
            ["t", Tastatur.einzelneTastenBuchstaben.tasteK_t],
            ["u", Tastatur.einzelneTastenBuchstaben.tasteK_u],
            ["v", Tastatur.einzelneTastenBuchstaben.tasteK_v],
            ["w", Tastatur.einzelneTastenBuchstaben.tasteK_w],
            ["x", Tastatur.einzelneTastenBuchstaben.tasteK_x],
            ["y", Tastatur.einzelneTastenBuchstaben.tasteK_y],
            ["z", Tastatur.einzelneTastenBuchstaben.tasteK_z],
            ["ä", Tastatur.einzelneTastenBuchstaben.tasteK_ä],
            ["ö", Tastatur.einzelneTastenBuchstaben.tasteK_ö],
            ["ü", Tastatur.einzelneTastenBuchstaben.tasteK_ü],
            ["ß", Tastatur.einzelneTastenBuchstaben.tasteK_ß],
        ]

        const zahlen = [
            ["0", Tastatur.einzelneTastenZahlen.taste_0],
            ["1", Tastatur.einzelneTastenZahlen.taste_1],
            ["2", Tastatur.einzelneTastenZahlen.taste_2],
            ["3", Tastatur.einzelneTastenZahlen.taste_3],
            ["4", Tastatur.einzelneTastenZahlen.taste_4],
            ["5", Tastatur.einzelneTastenZahlen.taste_5],
            ["6", Tastatur.einzelneTastenZahlen.taste_6],
            ["7", Tastatur.einzelneTastenZahlen.taste_7],
            ["8", Tastatur.einzelneTastenZahlen.taste_8],
            ["9", Tastatur.einzelneTastenZahlen.taste_9]
        ]

        const sonderzeichen = [
            [
                ["€", Tastatur.einzelneTastenBuchstaben.tasteLeer],
                ["'", Tastatur.einzelneTastenBuchstaben.tasteK_a],
                ["-", Tastatur.einzelneTastenBuchstaben.tasteK_b],
                ["]", Tastatur.einzelneTastenBuchstaben.tasteK_c],
                ["^", Tastatur.einzelneTastenBuchstaben.tasteK_d],
                ["[", Tastatur.einzelneTastenBuchstaben.tasteK_e],
                ["?", Tastatur.einzelneTastenBuchstaben.tasteK_f],
                ["=", Tastatur.einzelneTastenBuchstaben.tasteK_g],
                ["#", Tastatur.einzelneTastenBuchstaben.tasteK_h],
                ["!", Tastatur.einzelneTastenBuchstaben.tasteK_i],
                ["§", Tastatur.einzelneTastenBuchstaben.tasteK_j],
                ["@", Tastatur.einzelneTastenBuchstaben.tasteK_k],
                ["_", Tastatur.einzelneTastenBuchstaben.tasteK_l],
                [">", Tastatur.einzelneTastenBuchstaben.tasteK_m],
                [")", Tastatur.einzelneTastenBuchstaben.tasteK_n],
                ["|", Tastatur.einzelneTastenBuchstaben.tasteK_o],
                ["+", Tastatur.einzelneTastenBuchstaben.tasteK_p],
                ["/", Tastatur.einzelneTastenBuchstaben.tasteK_q],
                ["$", Tastatur.einzelneTastenBuchstaben.tasteK_r],
                ["*", Tastatur.einzelneTastenBuchstaben.tasteK_s],
                ["%", Tastatur.einzelneTastenBuchstaben.tasteK_t],
                ["&", Tastatur.einzelneTastenBuchstaben.tasteK_u],
                ["(", Tastatur.einzelneTastenBuchstaben.tasteK_v],
                ["<", Tastatur.einzelneTastenBuchstaben.tasteK_w],
                ["\\", Tastatur.einzelneTastenBuchstaben.tasteK_x],
                ["`", Tastatur.einzelneTastenBuchstaben.tasteK_y],
                ["\"", Tastatur.einzelneTastenBuchstaben.tasteK_z],
            ],
            [
                ["}", Tastatur.einzelneTastenBuchstaben.tasteK_c],
                ["{", Tastatur.einzelneTastenBuchstaben.tasteK_d]
            ],
            [
                [".", Tastatur.einzelneTastenSonderzeichen.taste_punkt],
                [",", Tastatur.einzelneTastenSonderzeichen.taste_komma],
                [":", Tastatur.einzelneTastenSonderzeichen.taste_doppelpunkt],
                [";", Tastatur.einzelneTastenSonderzeichen.taste_semikolon]
            ]
        ]

        // Buchstaben
        for (const buchstabe of kleinBuchstaben) {
            if (buchstabe[0] === aktuelleTaste) {
                buchstabe[1]()
                return
            } else if (buchstabe[0].toUpperCase() === aktuelleTaste) {
                Tastatur.einzelneTastenBuchstaben.shiftAnzeige()
                buchstabe[1]()
                return
            }
        }

        // Zahlen
        for (const zahl of zahlen) {
            if (zahl[0] === aktuelleTaste) {
                Tastatur.einzelneTastenSonderzeichen.sonderzeichenAnzeige("Rot")
                zahl[1]()
                return
            }
        }

        // Sonderzeichen
        for (let i = 0; i < sonderzeichen.length; i++) {
            for (const zeichen of sonderzeichen[i]) {
                if (zeichen[0] === aktuelleTaste) {
                    if (i === 0) {
                        Tastatur.einzelneTastenSonderzeichen.sonderzeichenAnzeige("Gelb")
                        zeichen[1]()
                        return
                    } else if (i === 1) {
                        Tastatur.einzelneTastenSonderzeichen.sonderzeichenAnzeige("Rot")
                        zeichen[1]()
                        return
                    } else {
                        zeichen[1]()
                        return
                    }
                }

            }
        }
    },

    clearTastatur: () => {
        Tastatur.taste1.classList.remove("green")
        Tastatur.taste2.classList.remove("green")
        Tastatur.taste3.classList.remove("green")
        Tastatur.taste4.classList.remove("green")
        Tastatur.taste5.classList.remove("green")
        Tastatur.tasteGelb.classList.remove("green")
        Tastatur.tasteRot.classList.remove("green")
        Tastatur.tasteGelb.classList.remove("shift")
        Tastatur.tasteRot.classList.remove("shift")
        setTimeout(clearInterval(Tastatur.einzelneTastenBuchstaben.schiftInterval))
        setTimeout(clearInterval(Tastatur.einzelneTastenSonderzeichen.intervalSonderzeichen))
    },

    stopProgrammAbfrage: () => {
        if (Tastatur.textCounter > Menue.ausgewählterText.length) {
            Auswertung.autoAuswertung()
        }
    },

    zählerTextCounter: () => {
        if (Tastatur.textCounter <= Menue.ausgewählterText.length) {
            Tastatur.textCounter++
        }
    },
    // mit location.reload zum zurücksetzen nicht mehr nötig
    setTextCounter: (n) => {
        Tastatur.textCounter = n
    }
}

// steuert alle nötigen funktion für den Programmablauf
// nimmt die tasteneingaben des users engegegen 
// startet alle eventlistener 
const ProgrammStart = {

    gestartet: false,

    immer: () => {
        // Header.logoutUser()
        // Header.setUsername()
        StartAnzeige.flackernAnzeige()
        TextLauf.laufenderText(Tastatur.textCounter)
        Menue.set_UserTime()
        Menue.timerStopButton()
        Menue.setText()
        Auswertung.auswertungReset()
        // DatenSpeichern.speichern()
    },

    ersteInteraktion: () => {
        Menue._timerStart()
        Menue._timerStop()
        StartAnzeige.ausblenden()
    },

    interAktion: (taste) => {
        Tastatur.clearTastatur()
        Tastatur.tastaturAnzeige(Menue.ausgewählterText[Tastatur.textCounter])
        TextLauf.laufenderText(Tastatur.textCounter)
        Menue.anschlagMessung()
        fehlerVerarbeitung.setZeichenZähler(Menue.getAusgewählterText()[Tastatur.textCounter])
        fehlerVerarbeitung.setFehlerZähler(
            String.fromCharCode(taste.keyCode),
            Menue.getAusgewählterText()[Tastatur.textCounter - 1]
        )
        Tastatur.zählerTextCounter()
        Tastatur.stopProgrammAbfrage()
    },

    tastenAbfrage: () => {
        window.addEventListener("keypress", (taste) => {
            if (Auswertung.inAuswertung) {
                return
            }

            if (String.fromCharCode(taste.keyCode) === " " && !ProgrammStart.gestartet) {
                ProgrammStart.ersteInteraktion()
                ProgrammStart.gestartet = true
            }

            if (ProgrammStart.gestartet) {
                ProgrammStart.interAktion(taste)

            }
        })
    },

    START: () => {
        document.addEventListener("DOMContentLoaded", () => {
            ProgrammStart.immer()
            ProgrammStart.tastenAbfrage()
        })
    },
}

ProgrammStart.START()
